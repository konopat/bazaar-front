"use strict";(self.webpackChunkbazaar_front=self.webpackChunkbazaar_front||[]).push([[398],{2114:(n,e,t)=>{t.d(e,{A:()=>b});var a=t(4848),o=t(6540),i=t(961),r=t(5072),c=t.n(r),l=t(7825),d=t.n(l),s=t(7659),u=t.n(s),m=t(5056),p=t.n(m),h=t(540),f=t.n(h),g=t(1113),v=t.n(g),_=t(3120),x={};x.styleTagTransform=v(),x.setAttributes=p(),x.insert=u().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=f();c()(_.A,x);_.A&&_.A.locals&&_.A.locals;var y=t(6905);"undefined"!=typeof document&&document.documentElement.style.setProperty("--scrollbar-width","".concat(function(){var n,e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var a=e.offsetWidth-t.offsetWidth;return null===(n=e.parentNode)||void 0===n||n.removeChild(e),a}(),"px"));const b=function(n){var e=n.isOpen,t=n.onClose,r=n.children,c=n.title,l=n.isLoading,d=void 0!==l&&l,s=n.skeletonConfig,u=void 0===s?{count:3,height:"2rem",spacing:"1rem"}:s,m=n.className,p=void 0===m?"":m,h=n.id,f=void 0===h?"modal":h,g=(0,o.useRef)(null),v=(0,o.useState)(!1),_=v[0],x=v[1],b=(0,o.useState)(!1),k=b[0],j=b[1],N=(0,o.useState)(!1),w=N[0],z=N[1],A=document.body.classList.contains("theme-dark"),S="".concat(f,"-title"),C="".concat(f,"-content"),E=(0,o.useCallback)((function(){x(!0),j(!1),setTimeout((function(){x(!1),t()}),300)}),[t]);(0,o.useEffect)((function(){if(e){var n=setTimeout((function(){if(j(!0),!w&&g.current){var n=g.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n.length>0?n[0].focus():g.current.focus(),z(!0)}}),150);return function(){return clearTimeout(n)}}z(!1)}),[e,w]),(0,o.useEffect)((function(){var n=function(n){"Escape"===n.key&&E()},t=document.activeElement,a=window.scrollY;return e&&(document.addEventListener("keydown",n),document.body.style.position="fixed",document.body.style.top="-".concat(a,"px"),document.body.style.width="100%",document.body.style.overflow="hidden"),function(){document.removeEventListener("keydown",n),"fixed"===document.body.style.position&&(document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,a)),!e&&t&&setTimeout((function(){t.focus()}),0)}}),[e,E]);var T=(0,o.useMemo)((function(){if(!d)return null;for(var n=u.count,e=void 0===n?3:n,t=u.height,o=void 0===t?"2rem":t,i=u.spacing,r=void 0===i?"1rem":i,c=[],l=0;l<e;l++)c.push((0,a.jsx)("div",{style:{marginBlockEnd:"number"==typeof r?"".concat(r,"px"):r},children:(0,a.jsx)(y.A,{height:o})},l));return c}),[d,u]);if(!e&&!_)return null;var I="modal ".concat(A?"theme-dark":""," ").concat(p),O=(0,a.jsx)("section",{className:"modal-overlay ".concat(_?"modal-overlay--closing":""),onClick:function(n){n.target===n.currentTarget&&E()},role:"dialog","aria-modal":"true","aria-labelledby":c?S:void 0,"aria-describedby":C,children:(0,a.jsxs)("div",{className:"".concat(I," ").concat(_?"modal--closing":""),ref:g,tabIndex:-1,onKeyDown:function(n){if("Tab"===n.key&&g.current){var e=g.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(0===e.length)return;var t=e[0],a=e[e.length-1];n.shiftKey&&document.activeElement===t?(n.preventDefault(),a.focus()):n.shiftKey||document.activeElement!==a||(n.preventDefault(),t.focus())}},id:f,children:[(0,a.jsxs)("header",{className:"modal__header",children:[c&&(0,a.jsx)("h2",{className:"modal__title fashion-heading",id:S,children:c}),(0,a.jsx)("button",{className:"modal__close",onClick:E,"aria-label":"Закрыть",type:"button",children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,a.jsx)("div",{className:"modal__content ".concat(k?"modal__content--visible":""),id:C,children:d?(0,a.jsx)("div",{className:"modal__skeleton-container",children:T}):r})]})});return(0,i.createPortal)(O,document.body)}},3120:(n,e,t)=>{t.d(e,{A:()=>c});var a=t(1601),o=t.n(a),i=t(6314),r=t.n(i)()(o());r.push([n.id,'.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  animation: modalFadeIn 0.3s ease-in-out;\n  padding: 20px;\n}\n\n.modal-overlay--closing {\n  animation: modalFadeOut 0.3s ease-in-out forwards;\n}\n\n.modal {\n  background: var(--color-background);\n  border-radius: var(--border-radius);\n  padding: 24px;\n  width: 90vw;\n  max-width: 900px;\n  max-height: 90vh;\n  overflow-y: auto;\n  position: relative;\n  box-shadow: var(--shadow-md);\n  animation: modalSlideIn 0.3s ease-in-out;\n  display: flex;\n  flex-direction: column;\n}\n\n:root[data-theme="dark"] .modal, \nhtml[data-theme="dark"] .modal, \nbody[data-theme="dark"] .modal {\n  background: #121212;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n}\n\n.modal--closing {\n  animation: modalSlideOut 0.3s ease-in-out forwards;\n}\n\n.modal__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n  flex-shrink: 0;\n}\n\n.modal__title {\n  font-family: var(--font-family-secondary);\n  font-size: var(--font-size-2xl);\n  color: var(--color-text);\n  margin: 0;\n  position: relative;\n}\n\n:root[data-theme="dark"] .modal__title, \nhtml[data-theme="dark"] .modal__title, \nbody[data-theme="dark"] .modal__title {\n  color: #F4E8DD;\n}\n\n.modal__title::after {\n  content: \'\';\n  position: absolute;\n  bottom: -8px;\n  left: 0;\n  width: 50px;\n  height: 2px;\n  background: var(--gradient-primary);\n}\n\n.modal__close {\n  background: none;\n  border: none;\n  padding: 12px;\n  margin: -12px;\n  cursor: pointer;\n  color: var(--color-text);\n  transition: color var(--transition-normal);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n:root[data-theme="dark"] .modal__close, \nhtml[data-theme="dark"] .modal__close, \nbody[data-theme="dark"] .modal__close {\n  color: #F4E8DD;\n}\n\n.modal__close:hover {\n  color: var(--color-primary);\n}\n\n.modal__close svg {\n  fill: currentColor;\n}\n\n.modal__content {\n  color: var(--color-text);\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 200px;\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n  position: relative;\n}\n\n:root[data-theme="dark"] .modal__content, \nhtml[data-theme="dark"] .modal__content, \nbody[data-theme="dark"] .modal__content {\n  color: #F4E8DD;\n}\n\n.modal__content--visible {\n  opacity: 1;\n}\n\n.modal__skeleton-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-height: 200px;\n}\n\n.modal__skeleton-container .skeleton-loader {\n  border-radius: var(--border-radius);\n}\n\n:root[data-theme="dark"] .modal__skeleton-container .skeleton-loader, \nhtml[data-theme="dark"] .modal__skeleton-container .skeleton-loader, \nbody[data-theme="dark"] .modal__skeleton-container .skeleton-loader {\n  background: linear-gradient(\n    90deg,\n    rgba(60, 60, 60, 1) 0%,\n    rgba(80, 80, 80, 1) 50%,\n    rgba(60, 60, 60, 1) 100%\n  );\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s ease infinite;\n}\n\n@keyframes modalFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes modalFadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n@keyframes modalSlideIn {\n  from {\n    transform: translateY(-20px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes modalSlideOut {\n  from {\n    transform: translateY(0);\n    opacity: 1;\n  }\n  to {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n}\n\n@media (max-width: 768px) {\n  .modal {\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    max-height: 100%;\n    border-radius: 0;\n  }\n}\n\n/* Дополнительные стили для модального окна, когда скролл страницы заблокирован */\nbody[style*="position: fixed"] {\n  /* Компенсируем ширину полосы прокрутки */\n  padding-right: var(--scrollbar-width, 15px);\n}\n\n/* Устанавливаем переменную для ширины скроллбара при загрузке страницы */\n:root {\n  --scrollbar-width: 0px;\n} ',""]);const c=r},3285:(n,e,t)=>{t.d(e,{A:()=>k});var a=t(4848),o=t(6540),i=t(6905),r=t(6151),c=t(5072),l=t.n(c),d=t(7825),s=t.n(d),u=t(7659),m=t.n(u),p=t(5056),h=t.n(p),f=t(540),g=t.n(f),v=t(1113),_=t.n(v),x=t(3474),y={};y.styleTagTransform=_(),y.setAttributes=h(),y.insert=m().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g();l()(x.A,y);x.A&&x.A.locals&&x.A.locals;var b=function(){return b=Object.assign||function(n){for(var e,t=1,a=arguments.length;t<a;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},b.apply(this,arguments)};const k=function(n){var e=n.src,t=n.alt,c=n.fallbackSrc,l=void 0===c?(0,r.O)("/images/placeholder.png"):c,d=n.className,s=void 0===d?"":d,u=n.containerClassName,m=void 0===u?"":u,p=n.objectFit,h=void 0===p?"contain":p,f=n.width,g=void 0===f?"100%":f,v=n.height,_=void 0===v?"100%":v,x=n.aspectRatio,y=n.caption,k=(0,o.useState)(!0),j=k[0],N=k[1],w=(0,o.useState)(!1),z=w[0],A=w[1],S=(0,o.useRef)(null),C=e.startsWith("/")?(0,r.O)(e):e;(0,o.useEffect)((function(){N(!0),A(!1),S.current&&S.current.complete&&N(!1)}),[C]);var E={margin:0,width:g,height:_},T=x?b(b({},E),{position:"relative",height:0,paddingBlockEnd:"".concat(1/x*100,"%"),paddingBottom:"".concat(1/x*100,"%")}):E,I=x?{objectFit:h,position:"absolute",insetBlockStart:0,insetBlockEnd:0,insetInlineStart:0,insetInlineEnd:0,inset:0,width:"100%",height:"100%"}:{objectFit:h,width:"100%",height:"100%"},O=x?{position:"absolute",insetBlockStart:0,insetBlockEnd:0,insetInlineStart:0,insetInlineEnd:0,inset:0,width:"100%",height:"100%"}:{width:"100%",height:"100%"};return(0,a.jsxs)("figure",{className:"lazy-image__container ".concat(m),style:T,children:[j&&(0,a.jsx)("span",{className:"lazy-image__skeleton",style:O,role:"presentation",children:(0,a.jsx)(i.A,{width:"100%",height:"100%",className:"lazy-image__skeleton-animation"})}),(0,a.jsx)("img",{ref:S,className:"lazy-image__img ".concat(s," ").concat(j?"lazy-image__img--hidden":""),src:z?l:C,alt:t,onLoad:function(){N(!1)},onError:function(){N(!1),A(!0)},style:I,loading:"lazy"}),y&&(0,a.jsx)("figcaption",{className:"lazy-image__caption",children:y})]})}},3474:(n,e,t)=>{t.d(e,{A:()=>c});var a=t(1601),o=t.n(a),i=t(6314),r=t.n(i)()(o());r.push([n.id,"/* Стили для компонента LazyImage */\n\n.lazy-image__container {\n  position: relative;\n  overflow: hidden;\n  display: block;\n  background-color: var(--color-skeleton-start);\n  border-radius: var(--border-radius, 8px);\n}\n\n.lazy-image__skeleton {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  border-radius: inherit;\n}\n\n.lazy-image__skeleton-animation {\n  background: linear-gradient(\n    90deg,\n    var(--color-skeleton-start),\n    var(--color-skeleton-end),\n    var(--color-skeleton-start)\n  );\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s infinite;\n  height: 100%;\n  width: 100%;\n}\n\n.lazy-image__img {\n  display: block;\n  width: 100%;\n  height: 100%;\n  transition: opacity 0.2s ease-in-out;\n  position: relative;\n  z-index: 2;\n}\n\n.lazy-image__img--hidden {\n  opacity: 0;\n}\n\n@keyframes skeleton-loading {\n  0% {\n    background-position: -100% 0;\n  }\n  100% {\n    background-position: 100% 0;\n  }\n}\n\n/* Специальные стили для темной темы */\n.theme-dark .lazy-image__container {\n  background-color: var(--color-background-dark);\n}\n\n.theme-dark .lazy-image__skeleton-animation {\n  background: linear-gradient(\n    90deg,\n    var(--color-skeleton-start-dark),\n    var(--color-skeleton-end-dark),\n    var(--color-skeleton-start-dark)\n  );\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s infinite;\n}\n\n@keyframes skeleton-loading-dark {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n/* Варианты соотношения сторон */\n.lazy-image-container--square {\n  aspect-ratio: 1/1;\n}\n\n.lazy-image-container--4x3 {\n  aspect-ratio: 4/3;\n}\n\n.lazy-image-container--16x9 {\n  aspect-ratio: 16/9;\n}\n\n.lazy-image-container--3x4 {\n  aspect-ratio: 3/4;\n}\n\n.lazy-image-container--2x3 {\n  aspect-ratio: 2/3;\n}\n\n/* Различные object-fit преднастройки */\n.lazy-image--cover {\n  object-fit: cover;\n}\n\n.lazy-image--contain {\n  object-fit: contain;\n}\n\n.lazy-image--fill {\n  object-fit: fill;\n}\n\n/* Модификаторы для эффектов при наведении */\n.lazy-image--zoom:hover {\n  transform: scale(1.1);\n}\n\n.lazy-image--no-zoom:hover {\n  transform: none;\n}\n\n/* Улучшение производительности с помощью hardware acceleration */\n.lazy-image__img, \n.lazy-image__skeleton {\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  will-change: opacity, transform;\n}\n\n/* Оптимизация для браузеров на базе WebKit */\n@supports (-webkit-overflow-scrolling: touch) {\n  .lazy-image__skeleton-animation {\n    /* Улучшение производительности на iOS */\n    -webkit-transform: translateZ(0);\n  }\n} ",""]);const c=r},4867:(n,e,t)=>{t.d(e,{A:()=>k});var a=t(4848),o=t(6540),i=t(961),r=t(5072),c=t.n(r),l=t(7825),d=t.n(l),s=t(7659),u=t.n(s),m=t(5056),p=t.n(m),h=t(540),f=t.n(h),g=t(1113),v=t.n(g),_=t(814),x={};x.styleTagTransform=v(),x.setAttributes=p(),x.insert=u().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=f();c()(_.A,x);_.A&&_.A.locals&&_.A.locals;var y=function(){return y=Object.assign||function(n){for(var e,t=1,a=arguments.length;t<a;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},y.apply(this,arguments)},b=function(n,e,t){if(t||2===arguments.length)for(var a,o=0,i=e.length;o<i;o++)!a&&o in e||(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))};const k=function(n){var e=n.productId,t=n.isVisible,r=n.onAnimationEnd,c=n.clickPosition,l=(0,o.useState)({}),d=l[0],s=l[1],u=(0,o.useState)(""),m=u[0],p=u[1],h=(0,o.useState)([]),f=h[0],g=h[1],v=(0,o.useRef)(null),_=(0,o.useRef)(!1),x=(0,o.useRef)(null),k=(0,o.useRef)(0),j=(0,o.useRef)({x:0,y:0});return(0,o.useEffect)((function(){if(!t)return s({}),g([]),_.current=!1,void(k.current=0);console.log("Animation triggered with clickPosition:",c);var n=document.querySelector(".cart-button");if(!n)return console.error("Не удалось найти кнопку корзины"),p("Ошибка: кнопка корзины не найдена"),void r();var e=n.getBoundingClientRect(),a=e.left+e.width/2,o=e.top+e.height/2;console.log("Cart button found:",{cartX:a,cartY:o});var i=c.x,l=c.y;if(j.current={x:i,y:l},s({position:"fixed",top:"".concat(l,"px"),left:"".concat(i,"px"),width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"var(--color-badge)",opacity:1,zIndex:999999999,boxShadow:"0 0 10px rgba(var(--color-accent-rgb), 0.7)"}),!x.current){var d=document.createElement("div");d.id="animation-portal",document.body.appendChild(d),x.current=d}var u=setTimeout((function(){if(t){_.current=!0;for(var e=350,c=[],d=0;d<30;d++){var m=d/29,p=(Math.sin(Math.PI*m),i+(a-i)*m),h=l+(o-l)*m-30*Math.sin(Math.PI*m);c.push({x:p,y:h})}s((function(n){return y(y({},n),{top:"".concat(o,"px"),left:"".concat(a,"px"),transition:"all ".concat(e,"ms cubic-bezier(0.25, 0.1, 0.25, 1.0)"),transform:"scale(0.1)",opacity:.5})}));var f=function(n){var a=58.333333333333336*n;setTimeout((function(){if(t){var o=a/e*.8,i=Math.floor(o*c.length),r=c[Math.min(i,c.length-1)];g((function(e){var t={id:Date.now()+Math.random(),style:{position:"fixed",top:"".concat(r.y,"px"),left:"".concat(r.x,"px"),width:"16px",height:"16px",opacity:0,transform:"scale(0)",animation:"dot-appear 300ms forwards",zIndex:999999990-n}};return b(b([],e,!0),[t],!1).slice(-5)}))}}),a)};for(d=1;d<=5;d++)f(d);console.log("Animation started towards cart:",{cartX:a,cartY:o});var v=setTimeout((function(){n.classList.add("cart-flash"),setTimeout((function(){n.classList.remove("cart-flash")}),300),console.log("Cart flash triggered")}),e),x=setTimeout((function(){r(),console.log("Animation completed")}),650);return function(){clearTimeout(u),clearTimeout(v),clearTimeout(x)}}}),10);return function(){clearTimeout(u)}}),[t,e,r,c]),(0,o.useEffect)((function(){return function(){if(x.current&&document.body.contains(x.current))try{document.body.removeChild(x.current),x.current=null}catch(n){console.error("Ошибка при удалении портала:",n)}}}),[]),i.createPortal((0,a.jsx)(a.Fragment,{children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:v,className:"animation-circle",style:d}),f.map((function(n){return(0,a.jsx)("div",{className:"animation-trail-dot",style:n.style},n.id)})),m&&(0,a.jsx)("div",{style:{position:"fixed",top:"20px",left:"20px",backgroundColor:"rgba(0,0,0,0.8)",color:"white",padding:"10px",zIndex:999999,maxWidth:"300px"},children:m})]})}),document.body)}},6151:(n,e,t)=>{t.d(e,{O:()=>a});var a=function(n){var e=n.startsWith("/")?n.slice(1):n;return"".concat("/bazaar-front/").concat(e)}},6398:(n,e,t)=>{t.d(e,{A:()=>h});var a=t(4848),o=t(6540),i=t(2896),r=t(7119),c=t(3285),l=t(2114),d=t(4976),s=t(7735);const u=function(n){var e=n.id,t=n.title,l=n.price,u=n.image,m=n.description,p=void 0===m?"Прекрасный букет из свежих цветов":m,h=n.color,f=void 0===h?"разноцветный":h,g=(0,i.wA)(),v=(0,o.useState)(!1),_=v[0],x=v[1],y=(0,o.useCallback)((function(){g((0,r.bE)({id:e,name:t,price:l,quantity:1,image:u}))}),[g,e,t,l,u]),b=(0,o.useCallback)((function(){x(!_)}),[_]);return(0,a.jsx)("div",{className:"product-detail",children:(0,a.jsxs)("div",{className:"product-detail__container",children:[(0,a.jsx)("div",{className:"product-detail__gallery",children:(0,a.jsx)("div",{className:"product-detail__image-wrapper",children:(0,a.jsx)(c.A,{src:u,alt:t,fallbackSrc:"/images/product-placeholder.jpg",className:"product-detail__image",objectFit:"cover"})})}),(0,a.jsxs)("div",{className:"product-detail__info",children:[(0,a.jsx)("p",{className:"product-detail__description",children:p}),(0,a.jsx)("div",{className:"product-detail__price-container",children:(0,a.jsx)("span",{className:"product-detail__price",children:function(n){return n.toLocaleString("ru-RU")+" ₽"}(l)})}),(0,a.jsxs)("div",{className:"product-detail__actions",children:[(0,a.jsx)("button",{className:"button button--primary product-detail__add-to-cart",onClick:y,"data-product-id":e,"aria-label":"Добавить ".concat(t," в корзину"),children:"В корзину"}),(0,a.jsx)("button",{className:"product-detail__favorite ".concat(_?"active":""),onClick:b,"aria-label":_?"Удалить из избранного":"Добавить в избранное",children:(0,a.jsx)(s.A,{name:"heart",size:24})})]}),(0,a.jsxs)("div",{className:"product-detail__details",children:[(0,a.jsxs)("div",{className:"product-detail__detail-item",children:[(0,a.jsx)("span",{children:"Доставка:"}),(0,a.jsx)("span",{className:"product-detail__detail-value",children:"Бесплатно в пределах МКАД"})]}),(0,a.jsxs)("div",{className:"product-detail__detail-item",children:[(0,a.jsx)("span",{children:"Артикул:"}),(0,a.jsxs)("span",{className:"product-detail__detail-value",children:["BQ-",e.toString().padStart(4,"0")]})]}),(0,a.jsxs)("div",{className:"product-detail__detail-item",children:[(0,a.jsx)("span",{children:"Категория:"}),(0,a.jsx)("span",{className:"product-detail__detail-value",children:"Букеты"})]}),(0,a.jsxs)("div",{className:"product-detail__detail-item",children:[(0,a.jsx)("span",{children:"Цвет:"}),(0,a.jsx)("span",{className:"product-detail__detail-value",children:f})]})]}),(0,a.jsx)("div",{className:"divider-accent"}),(0,a.jsxs)("div",{className:"product-detail__delivery-info",children:[(0,a.jsxs)("div",{className:"product-detail__delivery-item",children:[(0,a.jsx)(s.A,{name:"truck",size:24}),(0,a.jsx)("span",{children:"Быстрая доставка в день заказа"})]}),(0,a.jsxs)("div",{className:"product-detail__delivery-item",children:[(0,a.jsx)(s.A,{name:"leaf",size:24}),(0,a.jsx)("span",{children:"Только свежие цветы"})]})]}),(0,a.jsx)("div",{className:"product-detail__link-container",children:(0,a.jsx)(d.N_,{to:"/products/".concat(e),className:"product-detail__link",children:"Перейти на страницу товара"})})]})]})})};var m=t(4867),p=t(6151);const h=function(n){var e=n.id,t=n.price,d=n.image,s=n.description,h=n.color,f=n.title,g=n.name,v=n.oldPrice,_=n.category,x=n.isNew,y=void 0!==x&&x,b=n.isBestseller,k=void 0!==b&&b,j=n.isSpecialOffer,N=void 0!==j&&j,w=n.isHot,z=void 0!==w&&w,A=n.inCart,S=void 0!==A&&A,C=n.onClick,E=(0,i.wA)(),T=(0,o.useState)(!1),I=T[0],O=T[1],F=(0,o.useState)(!1),P=F[0],R=F[1],D=(0,o.useRef)(null),L=(0,o.useState)({x:0,y:0}),B=L[0],M=L[1],Y=f||g||"",q="string"==typeof e?parseInt(e):e,W=function(n){return n.toLocaleString("ru-RU")+" ₽"},K=(0,o.useCallback)((function(n){n.preventDefault(),n.stopPropagation(),M({x:n.clientX,y:n.clientY}),D.current&&(D.current.classList.add("clicked"),setTimeout((function(){var n;null===(n=D.current)||void 0===n||n.classList.remove("clicked")}),200)),R(!0),setTimeout((function(){E((0,r.bE)({id:q,name:Y,price:t,quantity:1,image:d}))}),400)}),[E,q,Y,t,d]),X=((0,o.useCallback)((function(n){n&&(n.preventDefault(),n.stopPropagation()),E((0,r.bE)({id:q,name:Y,price:t,quantity:1,image:d}))}),[E,q,Y,t,d]),(0,o.useCallback)((function(n){C?C():(n.preventDefault(),O(!0))}),[C])),U=(0,o.useCallback)((function(){O(!1)}),[]);return S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"product-card product-card--in-cart",children:(0,a.jsxs)("div",{className:"product-card__link",onClick:X,children:[(0,a.jsx)("div",{className:"product-card__image-container",children:(0,a.jsx)(c.A,{src:d,alt:Y,fallbackSrc:(0,p.O)("/images/product-placeholder.jpg"),containerClassName:"product-card__image-wrapper",className:"product-card__image",aspectRatio:1},"product-image-".concat(e))}),(0,a.jsxs)("div",{className:"product-card__content",children:[(0,a.jsx)("h3",{className:"product-card__name",children:Y}),(0,a.jsx)("div",{className:"product-card__price-container",children:(0,a.jsx)("span",{className:"product-card__price",children:W(t)})})]})]})}),(0,a.jsx)(l.A,{isOpen:I,onClose:U,title:Y,children:(0,a.jsx)(u,{id:q,title:Y,price:t,image:d,description:s,color:h})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"product-card",onClick:X,children:[z&&(0,a.jsx)("div",{className:"product-card__badge product-card__badge--hot",children:"Горячее предложение"}),N&&(0,a.jsx)("div",{className:"product-card__badge product-card__badge--special",children:"Специальное предложение"}),y&&(0,a.jsx)("div",{className:"product-card__badge product-card__badge--new",children:"Новинка"}),k&&(0,a.jsx)("div",{className:"product-card__badge product-card__badge--bestseller",children:"Хит"}),v&&(0,a.jsxs)("div",{className:"product-card__badge product-card__badge--sale",children:["-",Math.round(100*(1-t/v)),"%"]}),(0,a.jsx)("div",{className:"product-card__image",children:(0,a.jsx)(c.A,{src:d,alt:Y,fallbackSrc:(0,p.O)("/images/product-placeholder.jpg"),className:"product-card__image-content",containerClassName:"product-card__image-wrapper",objectFit:"cover",aspectRatio:1})}),(0,a.jsxs)("div",{className:"product-card__content",children:[_&&(0,a.jsx)("div",{className:"product-card__category",children:_}),(0,a.jsx)("h3",{className:"product-card__title",children:Y}),(0,a.jsxs)("div",{className:"product-card__price",children:[W(t),v&&(0,a.jsx)("span",{className:"product-card__old-price",children:W(v)})]}),(0,a.jsx)("button",{ref:D,className:"button button--primary product-card__button",onClick:K,"data-product-id":e,"aria-label":"Добавить ".concat(Y," в корзину"),id:"add-to-cart-".concat(e),children:"В корзину"})]}),P&&(0,a.jsx)(m.A,{productId:q,isVisible:P,onAnimationEnd:function(){return R(!1)},clickPosition:B})]}),(0,a.jsx)(l.A,{isOpen:I,onClose:U,title:Y,children:(0,a.jsx)(u,{id:q,title:Y,price:t,image:d,description:s,color:h})})]})}}}]);
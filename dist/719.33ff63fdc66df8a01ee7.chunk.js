"use strict";(self.webpackChunkbazaar_front=self.webpackChunkbazaar_front||[]).push([[719],{2719:(n,a,r)=>{r.r(a),r.d(a,{default:()=>w});var t=r(4848),e=r(6540),o=r(4976),i=r(2896),c=r(7119),s=r(7735),l=r(3285);const d=function(n){var a=n.id,r=n.name,e=n.price,s=n.oldPrice,d=n.image,m=n.category,p=n.isNew,u=void 0!==p&&p,_=n.isBestseller,g=void 0!==_&&_,x=n.inCart,h=void 0!==x&&x,b=(0,i.wA)(),v=function(n){return n.toLocaleString("ru-RU")+" ₽"};return(0,t.jsxs)("div",{className:"product-card ".concat(h?"product-card--in-cart":""),children:[(0,t.jsxs)(o.N_,{to:"/products/".concat(a),className:"product-card__link",children:[(0,t.jsxs)("div",{className:"product-card__image-container",children:[(0,t.jsx)(l.A,{src:d,alt:r,fallbackSrc:"/images/product-placeholder.jpg",containerClassName:"product-card__image-wrapper",className:"product-card__image",aspectRatio:1},"product-image-".concat(a)),!h&&(0,t.jsxs)("div",{className:"product-card__badges",children:[u&&(0,t.jsx)("span",{className:"product-card__badge product-card__badge--new",children:"Новинка"}),g&&(0,t.jsx)("span",{className:"product-card__badge product-card__badge--bestseller",children:"Хит"}),s&&(0,t.jsxs)("span",{className:"product-card__badge product-card__badge--sale",children:["-",Math.round(100*(1-e/s)),"%"]})]})]}),(0,t.jsxs)("div",{className:"product-card__content",children:[m&&!h&&(0,t.jsx)("div",{className:"product-card__category",children:m}),(0,t.jsx)("h3",{className:"product-card__name",children:r}),(0,t.jsxs)("div",{className:"product-card__price-container",children:[(0,t.jsx)("span",{className:"product-card__price",children:v(e)}),s&&!h&&(0,t.jsx)("span",{className:"product-card__old-price",children:v(s)})]})]})]}),!h&&(0,t.jsx)("button",{className:"product-card__add-to-cart button button--outline",onClick:function(){b((0,c.bE)({id:parseInt(a),name:r,price:e,quantity:1,image:d}))},children:"В корзину"})]})};var m=r(5072),p=r.n(m),u=r(7825),_=r.n(u),g=r(7659),x=r.n(g),h=r(5056),b=r.n(h),v=r(540),y=r.n(v),f=r(1113),k=r.n(f),j=r(5348),N={};N.styleTagTransform=k(),N.setAttributes=b(),N.insert=x().bind(null,"head"),N.domAPI=_(),N.insertStyleElement=y();p()(j.A,N);j.A&&j.A.locals&&j.A.locals;const w=function(){var n=(0,i.d4)((function(n){return n.cart})).items,a=(0,i.wA)(),r=(0,e.useState)(""),l=r[0],m=r[1],p=(0,e.useState)(!1),u=p[0],_=p[1],g=(0,e.useState)(0),x=g[0],h=g[1],b=(0,e.useCallback)((function(n,r){a(r<1?(0,c.dt)(n):(0,c.RO)({id:n,quantity:r}))}),[a]),v=(0,e.useCallback)((function(n){a((0,c.dt)(n))}),[a]),y=(0,e.useCallback)((function(){"DISCOUNT"===l.toUpperCase()?(_(!0),h(500)):alert("Промокод недействителен")}),[l]),f=(0,e.useCallback)((function(n,a){b(n,a-1)}),[b]),k=(0,e.useCallback)((function(n,a){b(n,a+1)}),[b]),j=(0,e.useMemo)((function(){var a=n.reduce((function(n,a){return n+a.price*a.quantity}),0);return{subtotal:a,deliveryCost:500,total:a+500-x}}),[n,x]),N=j.subtotal,w=j.deliveryCost,z=j.total,A=(0,e.useCallback)((function(n){return n.toLocaleString("ru-RU")+" ₽"}),[]);return(0,t.jsx)("div",{className:"cart-page",children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{className:"section-title section-title--centered",children:"Корзина"}),n.length>0?(0,t.jsxs)("div",{className:"cart-page__content",children:[(0,t.jsx)("div",{className:"cart-page__items",children:n.map((function(n){return(0,t.jsxs)("div",{className:"cart-item",children:[(0,t.jsx)("div",{className:"cart-item__product",children:(0,t.jsx)(d,{id:n.id.toString(),name:n.name,price:n.price,image:n.image,inCart:!0})}),(0,t.jsxs)("div",{className:"cart-item__controls",children:[(0,t.jsxs)("div",{className:"cart-item__quantity",children:[(0,t.jsx)("button",{className:"cart-item__quantity-btn",onClick:function(){return f(n.id,n.quantity)},"aria-label":"Уменьшить количество",children:"—"}),(0,t.jsx)("span",{className:"cart-item__quantity-value",children:n.quantity}),(0,t.jsx)("button",{className:"cart-item__quantity-btn",onClick:function(){return k(n.id,n.quantity)},"aria-label":"Увеличить количество",children:"+"})]}),(0,t.jsx)("div",{className:"cart-item__total",children:A(n.price*n.quantity)}),(0,t.jsx)("button",{className:"cart-item__remove",onClick:function(){return v(n.id)},"aria-label":"Удалить товар",children:(0,t.jsx)(s.A,{name:"check",size:14})})]})]},n.id)}))}),(0,t.jsxs)("div",{className:"cart-page__sidebar",children:[(0,t.jsxs)("div",{className:"cart-summary",children:[(0,t.jsx)("h2",{className:"section-title cart-summary__title",children:"Сумма заказа"}),(0,t.jsxs)("div",{className:"cart-summary__row",children:[(0,t.jsx)("span",{className:"cart-summary__label",children:"Товары"}),(0,t.jsx)("span",{className:"cart-summary__value",children:A(N)})]}),(0,t.jsxs)("div",{className:"cart-summary__row",children:[(0,t.jsx)("span",{className:"cart-summary__label",children:"Доставка"}),(0,t.jsx)("span",{className:"cart-summary__value",children:A(w)})]}),u&&(0,t.jsxs)("div",{className:"cart-summary__row cart-summary__row--discount",children:[(0,t.jsx)("span",{className:"cart-summary__label",children:"Скидка"}),(0,t.jsxs)("span",{className:"cart-summary__value",children:["-",A(x)]})]}),(0,t.jsx)("div",{className:"divider-accent cart-summary__divider"}),(0,t.jsxs)("div",{className:"cart-summary__row cart-summary__row--total",children:[(0,t.jsx)("span",{className:"cart-summary__label",children:"Итого"}),(0,t.jsx)("span",{className:"cart-summary__value",children:A(z)})]}),(0,t.jsxs)("div",{className:"cart-summary__promo",children:[(0,t.jsx)("input",{type:"text",placeholder:"Введите промокод",value:l,onChange:function(n){return m(n.target.value)},className:"cart-summary__promo-input"}),(0,t.jsx)("button",{className:"button button--outline",onClick:y,children:"Применить"})]}),(0,t.jsx)(o.N_,{to:"/checkout",className:"button button--primary cart-summary__checkout-btn",children:"Оформить заказ"})]}),(0,t.jsxs)("div",{className:"cart-help",children:[(0,t.jsx)("p",{className:"cart-help__text",children:"Нужна помощь с заказом? Позвоните нам:"}),(0,t.jsxs)("a",{href:"tel:+79991234567",className:"cart-help__phone",children:[(0,t.jsx)(s.A,{name:"phone",size:16})," +7 (999) 123-45-67"]})]})]})]}):(0,t.jsx)("div",{className:"cart-page__empty",children:(0,t.jsxs)("div",{className:"cart-empty",children:[(0,t.jsx)("div",{className:"cart-empty__icon",children:(0,t.jsx)(s.A,{name:"cart",size:64})}),(0,t.jsx)("p",{className:"cart-empty__message",children:"Ваша корзина пуста"}),(0,t.jsx)("p",{className:"cart-empty__submessage",children:"Какой хороший день, чтобы подарить цветок"}),(0,t.jsx)(o.N_,{to:"/catalog",className:"button button--primary cart-empty__button",children:"Перейти в каталог"})]})}),(0,t.jsx)("div",{className:"cart-page__continue-shopping",children:(0,t.jsx)(o.N_,{to:"/catalog",className:"cart-page__continue-link",children:"← Продолжить покупки"})})]})})}},3285:(n,a,r)=>{r.d(a,{A:()=>f});var t=r(4848),e=r(6540),o=r(6905),i=r(5072),c=r.n(i),s=r(7825),l=r.n(s),d=r(7659),m=r.n(d),p=r(5056),u=r.n(p),_=r(540),g=r.n(_),x=r(1113),h=r.n(x),b=r(3474),v={};v.styleTagTransform=h(),v.setAttributes=u(),v.insert=m().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=g();c()(b.A,v);b.A&&b.A.locals&&b.A.locals;var y=function(){return y=Object.assign||function(n){for(var a,r=1,t=arguments.length;r<t;r++)for(var e in a=arguments[r])Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e]);return n},y.apply(this,arguments)};const f=function(n){var a=n.src,r=n.alt,i=n.fallbackSrc,c=void 0===i?"/images/placeholder.png":i,s=n.className,l=void 0===s?"":s,d=n.containerClassName,m=void 0===d?"":d,p=n.objectFit,u=void 0===p?"contain":p,_=n.width,g=void 0===_?"100%":_,x=n.height,h=void 0===x?"100%":x,b=n.aspectRatio,v=(0,e.useState)(!0),f=v[0],k=v[1],j=(0,e.useState)(!1),N=j[0],w=j[1];(0,e.useEffect)((function(){k(!0),w(!1)}),[a]);var z=b?{position:"relative",width:g,height:0,paddingBottom:"".concat(1/b*100,"%")}:{width:g,height:h},A=y({objectFit:u},b?{position:"absolute",top:0,left:0,width:"100%",height:"100%"}:{});return(0,t.jsxs)("div",{className:"lazy-image__container ".concat(m),style:z,children:[f&&(0,t.jsx)("div",{className:"lazy-image__skeleton",style:b?{position:"absolute",top:0,left:0,width:"100%",height:"100%"}:{},children:(0,t.jsx)(o.A,{width:"100%",height:"100%",className:"lazy-image__skeleton-animation"})}),(0,t.jsx)("img",{className:"lazy-image__img ".concat(l," ").concat(f?"lazy-image__img--hidden":""),src:N?c:a,alt:r,onLoad:function(){k(!1)},onError:function(){k(!1),w(!0)},style:A})]})}},3474:(n,a,r)=>{r.d(a,{A:()=>c});var t=r(1601),e=r.n(t),o=r(6314),i=r.n(o)()(e());i.push([n.id,"/* Стили для компонента LazyImage */\n\n.lazy-image__container {\n  position: relative;\n  overflow: hidden;\n  display: block;\n  background-color: var(--color-skeleton-start);\n  border-radius: var(--border-radius, 8px);\n}\n\n.lazy-image__skeleton {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  border-radius: inherit;\n}\n\n.lazy-image__skeleton-animation {\n  background: linear-gradient(\n    90deg,\n    var(--color-skeleton-start),\n    var(--color-skeleton-end),\n    var(--color-skeleton-start)\n  );\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s infinite;\n  height: 100%;\n  width: 100%;\n}\n\n.lazy-image__img {\n  display: block;\n  width: 100%;\n  height: 100%;\n  transition: opacity 0.2s ease-in-out;\n  position: relative;\n  z-index: 2;\n}\n\n.lazy-image__img--hidden {\n  opacity: 0;\n}\n\n@keyframes skeleton-loading {\n  0% {\n    background-position: -100% 0;\n  }\n  100% {\n    background-position: 100% 0;\n  }\n}\n\n/* Специальные стили для темной темы */\n.theme-dark .lazy-image__container {\n  background-color: var(--color-background-dark);\n}\n\n.theme-dark .lazy-image__skeleton-animation {\n  background: linear-gradient(\n    90deg,\n    var(--color-skeleton-start-dark),\n    var(--color-skeleton-end-dark),\n    var(--color-skeleton-start-dark)\n  );\n  background-size: 200% 100%;\n  animation: skeleton-loading 1.5s infinite;\n}\n\n@keyframes skeleton-loading-dark {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n/* Варианты соотношения сторон */\n.lazy-image-container--square {\n  aspect-ratio: 1/1;\n}\n\n.lazy-image-container--4x3 {\n  aspect-ratio: 4/3;\n}\n\n.lazy-image-container--16x9 {\n  aspect-ratio: 16/9;\n}\n\n.lazy-image-container--3x4 {\n  aspect-ratio: 3/4;\n}\n\n.lazy-image-container--2x3 {\n  aspect-ratio: 2/3;\n}\n\n/* Различные object-fit преднастройки */\n.lazy-image--cover {\n  object-fit: cover;\n}\n\n.lazy-image--contain {\n  object-fit: contain;\n}\n\n.lazy-image--fill {\n  object-fit: fill;\n}\n\n/* Модификаторы для эффектов при наведении */\n.lazy-image--zoom:hover {\n  transform: scale(1.1);\n}\n\n.lazy-image--no-zoom:hover {\n  transform: none;\n}\n\n/* Улучшение производительности с помощью hardware acceleration */\n.lazy-image__img, \n.lazy-image__skeleton {\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  will-change: opacity, transform;\n}\n\n/* Оптимизация для браузеров на базе WebKit */\n@supports (-webkit-overflow-scrolling: touch) {\n  .lazy-image__skeleton-animation {\n    /* Улучшение производительности на iOS */\n    -webkit-transform: translateZ(0);\n  }\n} ",""]);const c=i},5348:(n,a,r)=>{r.d(a,{A:()=>c});var t=r(1601),e=r.n(t),o=r(6314),i=r.n(o)()(e());i.push([n.id,"/* Стили для страницы корзины */\n\n/* Основные стили */\n.cart-page {\n  padding: 40px 0;\n  background-color: var(--color-background);\n  min-height: calc(100vh - 200px);\n  transition: all var(--transition-normal);\n}\n\n.cart-page__content {\n  display: grid;\n  grid-template-columns: 1fr 350px;\n  gap: 30px;\n  margin-top: 40px;\n}\n\n@media (max-width: 992px) {\n  .cart-page__content {\n    grid-template-columns: 1fr;\n  }\n}\n\n.cart-page__items {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.cart-page__continue-shopping {\n  margin-top: 30px;\n  text-align: left;\n}\n\n.cart-page__continue-link {\n  color: var(--color-text);\n  text-decoration: none;\n  font-weight: 500;\n  transition: color var(--transition-fast);\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.cart-page__continue-link:hover {\n  color: var(--color-primary);\n}\n\n/* Стили для элемента корзины */\n.cart-item {\n  display: flex;\n  padding: 20px;\n  border-radius: var(--border-radius-lg);\n  background-color: var(--color-card-background);\n  border: 1px solid var(--color-border);\n  box-shadow: var(--shadow-md);\n  transition: all var(--transition-normal);\n}\n\n.cart-item:hover {\n  box-shadow: var(--shadow-lg);\n  transform: translateY(-2px);\n}\n\n.cart-item__product {\n  flex: 1;\n}\n\n.cart-item__controls {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-end;\n  gap: 15px;\n  margin-left: 20px;\n}\n\n.cart-item__quantity {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n\n.cart-item__quantity-btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 30px;\n  border: 1px solid var(--color-border);\n  border-radius: 50%;\n  background-color: var(--color-card-background);\n  color: var(--color-text);\n  font-size: 16px;\n  cursor: pointer;\n  transition: all var(--transition-fast);\n}\n\n.cart-item__quantity-btn:hover {\n  background-color: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n\n.cart-item__quantity-value {\n  font-weight: 600;\n  font-size: 18px;\n  min-width: 30px;\n  text-align: center;\n  color: var(--color-text);\n}\n\n.cart-item__total {\n  font-weight: 600;\n  font-size: 18px;\n  color: var(--color-primary);\n}\n\n.cart-item__remove {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 30px;\n  height: 30px;\n  border: none;\n  background-color: transparent;\n  color: var(--color-text-light);\n  cursor: pointer;\n  transition: color var(--transition-fast);\n  font-size: 18px;\n}\n\n.cart-item__remove:hover {\n  color: var(--color-error);\n}\n\n/* Стили для карточки товара в корзине */\n.product-card--in-cart {\n  padding: 0;\n  box-shadow: none;\n  background-color: transparent;\n}\n\n.product-card--in-cart .product-card__link {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  color: var(--color-text);\n}\n\n.product-card--in-cart .product-card__image-container {\n  width: 80px;\n  height: 80px;\n  flex-shrink: 0;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  background-color: var(--color-card-background);\n  margin-inline-start: var(--spacing-sm);\n}\n\n.product-card--in-cart .product-card__name {\n  font-size: 16px;\n  margin-bottom: 5px;\n  color: var(--color-text);\n}\n\n.product-card--in-cart .product-card__price {\n  font-size: 16px;\n  color: var(--color-primary);\n}\n\n/* Стили для боковой панели с суммой заказа */\n.cart-page__sidebar {\n  position: sticky;\n  top: 30px;\n}\n\n.cart-summary {\n  padding: 25px;\n  border-radius: var(--border-radius-lg);\n  background-color: var(--color-card-background);\n  border: 1px solid var(--color-border);\n  box-shadow: var(--shadow-md);\n  transition: all var(--transition-normal);\n}\n\n.cart-summary__title {\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 20px;\n  color: var(--color-text);\n}\n\n.cart-summary__row {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 15px;\n}\n\n.cart-summary__label {\n  color: var(--color-text-light);\n}\n\n.cart-summary__value {\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n.cart-summary__row--discount .cart-summary__value {\n  color: var(--color-success);\n}\n\n.cart-summary__row--total {\n  font-size: 18px;\n  margin-top: 5px;\n  margin-bottom: 25px;\n}\n\n.cart-summary__row--total .cart-summary__label,\n.cart-summary__row--total .cart-summary__value {\n  font-weight: 700;\n  color: var(--color-text);\n}\n\n.cart-summary__divider {\n  margin: 20px 0;\n  height: 1px;\n  background-color: var(--color-border);\n}\n\n.cart-summary__promo {\n  display: flex;\n  margin-bottom: 20px;\n  gap: 10px;\n}\n\n.cart-summary__promo-input {\n  flex: 1;\n  padding: 10px 15px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  background-color: var(--color-card-background);\n  color: var(--color-text);\n  transition: border-color var(--transition-fast);\n}\n\n.cart-summary__promo-input:focus {\n  border-color: var(--color-primary);\n  outline: none;\n}\n\n.cart-summary__checkout-btn {\n  width: 100%;\n  padding: 12px;\n  font-size: 16px;\n}\n\n/* Стили для блока помощи */\n.cart-help {\n  margin-top: 20px;\n  padding: 20px;\n  border-radius: var(--border-radius-lg);\n  background-color: var(--color-card-background);\n  border: 1px solid var(--color-border);\n  box-shadow: var(--shadow-md);\n  text-align: center;\n  transition: all var(--transition-normal);\n}\n\n.cart-help__text {\n  color: var(--color-text);\n  margin-bottom: 10px;\n}\n\n.cart-help__phone {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: var(--color-primary);\n  font-weight: 600;\n  text-decoration: none;\n  padding: 8px 16px;\n  border-radius: var(--border-radius);\n  transition: all var(--transition-fast);\n}\n\n.cart-help__phone:hover {\n  background-color: var(--color-background-light);\n}\n\n/* Стили для пустой корзины */\n.cart-empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 60px 20px;\n  border-radius: var(--border-radius-lg);\n  background-color: var(--color-card-background);\n  border: 1px solid var(--color-border);\n  box-shadow: var(--shadow-md);\n  margin: 40px auto;\n  max-width: 600px;\n  text-align: center;\n  transition: all var(--transition-normal);\n}\n\n.cart-empty__icon {\n  padding: 20px;\n  border-radius: 50%;\n  margin-bottom: 20px;\n  background-color: var(--color-background-light);\n  color: var(--color-primary);\n}\n\n.cart-empty__message {\n  font-size: 24px;\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: var(--color-text);\n}\n\n.cart-empty__submessage {\n  font-size: 16px;\n  margin-bottom: 30px;\n  color: var(--color-text-light);\n}\n\n.cart-empty__button {\n  min-width: 180px;\n}\n\n/* Стили для кнопок */\n.button {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  padding: 10px 20px;\n  border-radius: var(--border-radius);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--transition-fast);\n  border: none;\n  text-decoration: none;\n}\n\n.button--primary {\n  background-color: var(--color-primary);\n  color: white;\n}\n\n.button--primary:hover {\n  filter: brightness(1.05);\n  transform: translateY(-1px);\n}\n\n.button--outline {\n  background-color: transparent;\n  border: 1px solid var(--color-primary);\n  color: var(--color-primary);\n}\n\n.button--outline:hover {\n  background-color: var(--color-background-light);\n}\n\n/* Стили для заголовков */\n.section-title {\n  font-family: var(--font-family-secondary);\n  color: var(--color-text);\n  font-weight: 600;\n}\n\n.section-title--centered {\n  text-align: center;\n} ",""]);const c=i}}]);
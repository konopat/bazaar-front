"use strict";(self.webpackChunkbazaar_front=self.webpackChunkbazaar_front||[]).push([[153],{1843:(n,e,o)=>{o.d(e,{A:()=>i});var t=o(1601),r=o.n(t),a=o(6314),s=o.n(a)()(r());s.push([n.id,'.stores-map {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-xl);\n  height: 600px;\n  margin-top: var(--spacing-sm);\n  opacity: 0;\n  transition: opacity var(--transition-slow);\n}\n\n.stores-map--visible {\n  opacity: 1;\n}\n\n.stores-map__container {\n  flex: 1;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  position: relative;\n  box-shadow: var(--shadow-primary);\n  border: 1px solid var(--color-border);\n  min-height: 400px;\n  width: 100%;\n}\n\n[data-theme="dark"] .stores-map__container {\n  box-shadow: 0 4px 12px rgba(212, 169, 119, 0.2);\n  border: 1px solid rgba(212, 169, 119, 0.4);\n}\n\n.stores-map__error {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--spacing-lg);\n  text-align: center;\n  background-color: var(--color-background);\n  color: var(--color-text);\n  z-index: 2;\n}\n\n[data-theme="dark"] .stores-map__error {\n  background-color: rgba(18, 18, 18, 0.9);\n  color: #F4E8DD;\n}\n\n.stores-map__error p {\n  max-width: 300px;\n  font-size: var(--font-size-md);\n  line-height: 1.5;\n}\n\n.stores-map__skeleton {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--color-background);\n  z-index: 10;\n  padding: var(--spacing-xl);\n}\n\n[data-theme="dark"] .stores-map__skeleton,\n:root[data-theme="dark"] .stores-map__skeleton,\nhtml[data-theme="dark"] .stores-map__skeleton,\nbody[data-theme="dark"] .stores-map__skeleton {\n  background-color: #121212;\n}\n\n.stores-map__skeleton-content {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-xl);\n}\n\n.stores-map__skeleton-title {\n  margin-bottom: var(--spacing-md);\n}\n\n.stores-map__skeleton-grid {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n}\n\n.stores-map__skeleton-area {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n}\n\n.stores-map__skeleton-main {\n  min-height: 200px;\n  margin-bottom: var(--spacing-md);\n}\n\n.stores-map__skeleton-details {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.stores-map__skeleton-points {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  margin-top: var(--spacing-xl);\n}\n\n.stores-map__skeleton-point {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n}\n\n/* Удаляем старые стили для спиннера */\n.stores-map__loading-icon {\n  display: none;\n}\n\n.stores-map__loading-text {\n  display: none;\n}\n\n.stores-map__list {\n  width: 100%;\n  overflow-y: auto;\n  padding-right: var(--spacing-xs);\n  max-height: 200px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--spacing-md);\n}\n\n.stores-map__store-button {\n  flex: 1;\n  min-width: 200px;\n  text-align: left;\n  padding: var(--spacing-md);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  background: none;\n  cursor: pointer;\n  transition: all var(--transition-normal);\n  position: relative;\n  overflow: hidden;\n}\n\n[data-theme="dark"] .stores-map__store-button {\n  border-color: rgba(212, 169, 119, 0.4);\n  background-color: rgba(18, 18, 18, 0.3);\n}\n\n.stores-map__store-button::before {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 3px;\n  height: 100%;\n  background: var(--gradient-primary);\n  transform: scaleY(0);\n  transform-origin: bottom;\n  transition: transform var(--transition-normal);\n}\n\n.stores-map__store-button:hover {\n  border-color: var(--color-primary);\n  background-color: rgba(var(--primary-rgb), 0.03);\n  box-shadow: var(--shadow-sm);\n}\n\n[data-theme="dark"] .stores-map__store-button:hover {\n  background-color: rgba(212, 169, 119, 0.1);\n  box-shadow: 0 2px 8px rgba(212, 169, 119, 0.2);\n}\n\n.stores-map__store-button:hover::before {\n  transform: scaleY(1);\n}\n\n.stores-map__store-button--active {\n  border-color: var(--color-primary);\n  background-color: rgba(var(--primary-rgb), 0.06);\n  box-shadow: var(--shadow-sm);\n}\n\n[data-theme="dark"] .stores-map__store-button--active {\n  background-color: rgba(212, 169, 119, 0.2);\n  box-shadow: 0 2px 8px rgba(212, 169, 119, 0.3);\n}\n\n.stores-map__store-button--active::before {\n  transform: scaleY(1);\n}\n\n.stores-map__store-name {\n  font-family: var(--font-family-secondary);\n  font-size: var(--font-size-lg);\n  color: var(--color-text);\n  margin: 0 0 var(--spacing-sm);\n}\n\n[data-theme="dark"] .stores-map__store-name {\n  color: #F4E8DD;\n}\n\n.stores-map__store-address {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-light);\n  margin: 0;\n}\n\n[data-theme="dark"] .stores-map__store-address {\n  color: #D4A977;\n}\n\n/* Стили для OpenLayers */\n.ol-control {\n  background: none;\n}\n\n.ol-zoom {\n  top: var(--spacing-md);\n  right: var(--spacing-md);\n  left: auto;\n}\n\n.ol-zoom button {\n  background-color: var(--color-background);\n  color: var(--color-text);\n  border: 1px solid var(--color-primary);\n  margin: 2px;\n  transition: all var(--transition-normal);\n}\n\n[data-theme="dark"] .ol-zoom button {\n  background-color: rgba(18, 18, 18, 0.8);\n  color: #F4E8DD;\n  border-color: #D4A977;\n}\n\n.ol-zoom button:hover {\n  background-color: var(--color-primary);\n  color: #FFFFFF;\n}\n\n[data-theme="dark"] .ol-zoom button:hover {\n  background-color: #D4A977;\n  color: #121212;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n/* Адаптивные стили */\n@media (min-width: 768px) {\n  .stores-map {\n    flex-direction: row;\n  }\n  \n  .stores-map__list {\n    width: 300px;\n    max-height: none;\n    flex-direction: column;\n    flex-wrap: nowrap;\n  }\n  \n  .stores-map__store-button {\n    min-width: auto;\n    margin-bottom: var(--spacing-md);\n    flex: none;\n  }\n}\n\n.stores-map__hidden {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n\n.stores-map__skeleton-container {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--color-background);\n}\n\n[data-theme="dark"] .stores-map__skeleton-container {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n.stores-modal-content {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  gap: var(--spacing-md);\n}\n\n.stores-modal-content .stores-map__container {\n  min-height: 300px;\n  height: 300px;\n  position: relative;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  box-shadow: var(--shadow-primary);\n  border: 1px solid var(--color-border);\n}\n\n.stores-modal-content .stores-map__list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  max-height: none;\n  width: 100%;\n  height: auto;\n  overflow: visible;\n  flex-wrap: nowrap;\n}\n\n/* На мобильных - отображаем в столбик */\n@media (max-width: 767px) {\n  .stores-modal-content .stores-map__list {\n    flex-direction: column;\n  }\n\n  .stores-modal-content .stores-map__store-button {\n    width: 100%;\n  }\n}\n\n/* На планшетах и выше можно отобразить в ряд */\n@media (min-width: 768px) {\n  .stores-modal-content .stores-map__list {\n    flex-direction: row;\n    flex-wrap: wrap;\n  }\n\n  .stores-modal-content .stores-map__store-button {\n    flex: 1;\n    min-width: 200px;\n  }\n}\n\n.stores-map-wrapper {\n  flex: 2;\n  min-height: 300px;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  box-shadow: var(--shadow-primary);\n  border: 1px solid var(--color-border);\n}\n\n[data-theme="dark"] .stores-map-wrapper {\n  box-shadow: 0 4px 12px rgba(212, 169, 119, 0.2);\n  border: 1px solid rgba(212, 169, 119, 0.4);\n}\n\n.stores-modal-details-column {\n  flex: 1;\n  min-height: 250px;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  box-shadow: var(--shadow-sm);\n  border: 1px solid var(--color-border);\n}\n\n[data-theme="dark"] .stores-modal-details-column {\n  border-color: rgba(212, 169, 119, 0.3);\n  box-shadow: 0 2px 8px rgba(212, 169, 119, 0.1);\n}\n\n.stores-modal-list-column {\n  flex: 1;\n}\n\n.stores-modal-list-column .stores-map__list {\n  max-height: 300px;\n  overflow-y: auto;\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n\n.stores-modal-list-column .stores-map__store-button {\n  width: 100%;\n  min-width: auto;\n}\n\n/* Адаптивные стили для десктопов */\n@media (min-width: 768px) {\n  .stores-modal-layout {\n    flex-direction: row;\n    align-items: stretch;\n    height: 600px;\n  }\n  \n  .stores-modal-map-column {\n    flex: 3;\n    min-height: 100%;\n    max-width: 65%;\n  }\n  \n  .stores-modal-list-column {\n    flex: 2;\n    max-width: 35%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .stores-modal-list-column .stores-map__list {\n    flex: 1;\n    max-height: none;\n  }\n  \n  .stores-map-wrapper {\n    height: 60% !important;\n  }\n  \n  .stores-modal-details-column {\n    height: 40%;\n  }\n}\n\n/* Обновленные стили для компонента StoreDetails с двухколоночным лэйаутом */\n.store-details {\n  padding: var(--spacing-md);\n  border-radius: var(--border-radius);\n  background-color: var(--color-background);\n  height: 100%;\n}\n\n[data-theme="dark"] .store-details {\n  background-color: rgba(18, 18, 18, 0.8);\n}\n\n.store-details--empty {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: var(--spacing-xl);\n  color: var(--color-text-light);\n  font-style: italic;\n}\n\n.store-details__layout {\n  display: flex;\n  height: 100%;\n  gap: var(--spacing-md);\n}\n\n.store-details__photo-column {\n  flex: 1;\n  min-width: 120px;\n  height: 100%;\n  overflow: hidden;\n  border-radius: var(--border-radius);\n  border: 1px solid var(--color-border);\n  position: relative;\n}\n\n[data-theme="dark"] .store-details__photo-column {\n  border-color: rgba(212, 169, 119, 0.3);\n}\n\n.store-details__photo-skeleton {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n}\n\n.store-details__skeleton-animation {\n  background: linear-gradient(90deg, \n    var(--color-skeleton-start) 0%, \n    var(--color-skeleton-end) 50%, \n    var(--color-skeleton-start) 100%);\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite;\n}\n\n[data-theme="dark"] .store-details__skeleton-animation {\n  background: linear-gradient(90deg, \n    rgba(32, 32, 32, 0.8) 0%, \n    rgba(48, 48, 48, 0.8) 50%, \n    rgba(32, 32, 32, 0.8) 100%);\n  background-size: 200% 100%;\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: 200% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}\n\n.store-details__photo {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform var(--transition-normal), opacity var(--transition-normal);\n}\n\n.store-details__photo--loading {\n  opacity: 0;\n}\n\n.store-details__photo:not(.store-details__photo--loading):hover {\n  transform: scale(1.05);\n}\n\n.store-details__info-column {\n  flex: 2;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.store-details__name {\n  font-family: var(--font-family-secondary);\n  font-size: var(--font-size-lg);\n  color: var(--color-text);\n  margin: 0 0 var(--spacing-sm);\n}\n\n[data-theme="dark"] .store-details__name {\n  color: #F4E8DD;\n}\n\n.store-details__address,\n.store-details__phone,\n.store-details__status {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  font-size: var(--font-size-sm);\n  color: var(--color-text);\n  margin: 0;\n}\n\n.store-details__icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.store-details__link {\n  color: var(--color-primary);\n  text-decoration: none;\n  transition: color var(--transition-normal);\n}\n\n.store-details__link:hover {\n  color: var(--color-primary-dark);\n  text-decoration: underline;\n}\n\n[data-theme="dark"] .store-details__link {\n  color: #D4A977;\n}\n\n[data-theme="dark"] .store-details__link:hover {\n  color: #E8D6C6;\n}\n\n.store-details__status--open {\n  color: var(--color-success);\n}\n\n.store-details__status--closed {\n  color: var(--color-error);\n}\n\n[data-theme="dark"] .store-details__status--open {\n  color: #6CBB87;\n}\n\n[data-theme="dark"] .store-details__status--closed {\n  color: #E57373;\n}\n\n/* Адаптивные стили для мобильных устройств */\n@media (max-width: 576px) {\n  .store-details__layout {\n    flex-direction: column;\n  }\n  \n  .store-details__photo-column {\n    height: 150px;\n    width: 100%;\n  }\n}\n\n/* Адаптивные стили для компонента StoreDetails */\n@media (min-width: 768px) {\n  .stores-modal-map-column {\n    position: relative;\n  }\n  \n  .stores-modal-details-column {\n    flex: 1;\n    max-height: 300px;\n    overflow-y: auto;\n  }\n}\n\n/* Исправляем отображение карты в модальном окне */\n.stores-modal-map-column .stores-map {\n  height: 100%;\n  margin-top: 0;\n  opacity: 1;\n}\n\n/* Исправляем контейнер карты в модальном окне */\n.stores-modal-map-column .stores-map__container {\n  min-height: 100%;\n  height: 100%;\n  position: relative;\n}\n\n/* В модальном окне скелетон должен полностью покрывать область карты */\n.stores-map-wrapper .stores-map__skeleton-container {\n  border-radius: var(--border-radius);\n}\n\n/* Убедимся, что карта занимает все доступное пространство */\n.stores-map-wrapper .stores-map,\n.stores-map-wrapper .stores-map__container {\n  height: 100% !important;\n  width: 100% !important;\n  min-height: inherit !important;\n  max-height: inherit !important;\n}\n\n.stores-section-title {\n  font-family: var(--font-family-secondary);\n  font-size: var(--font-size-lg);\n  color: var(--color-text);\n  margin: 0 0 var(--spacing-sm);\n  position: relative;\n  padding-left: var(--spacing-md);\n}\n\n.stores-section-title::before {\n  content: \'\';\n  position: absolute;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 3px;\n  height: 70%;\n  background: var(--gradient-primary);\n  border-radius: 2px;\n}\n\n[data-theme="dark"] .stores-section-title {\n  color: #F4E8DD;\n}\n\n/* Обновленные стили для модального окна с двухколоночным лэйаутом */\n.stores-modal-layout {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-lg);\n  width: 100%;\n}\n\n.stores-modal-map-column {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  min-height: 600px;\n}\n\n.stores-map-wrapper {\n  flex: 2;\n  min-height: 300px;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  box-shadow: var(--shadow-primary);\n  border: 1px solid var(--color-border);\n}\n\n[data-theme="dark"] .stores-map-wrapper {\n  box-shadow: 0 4px 12px rgba(212, 169, 119, 0.2);\n  border: 1px solid rgba(212, 169, 119, 0.4);\n}\n\n.stores-modal-details-column {\n  flex: 1;\n  min-height: 250px;\n  border-radius: var(--border-radius);\n  overflow: hidden;\n  box-shadow: var(--shadow-sm);\n  border: 1px solid var(--color-border);\n}\n\n[data-theme="dark"] .stores-modal-details-column {\n  border-color: rgba(212, 169, 119, 0.3);\n  box-shadow: 0 2px 8px rgba(212, 169, 119, 0.1);\n}\n\n.stores-modal-list-column {\n  flex: 1;\n}\n\n.stores-modal-list-column .stores-map__list {\n  max-height: 300px;\n  overflow-y: auto;\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n\n.stores-modal-list-column .stores-map__store-button {\n  width: 100%;\n  min-width: auto;\n}\n\n/* Адаптивные стили для десктопов */\n@media (min-width: 768px) {\n  .stores-modal-layout {\n    flex-direction: row;\n    align-items: stretch;\n    height: 600px;\n  }\n  \n  .stores-modal-map-column {\n    flex: 3;\n    min-height: 100%;\n    max-width: 65%;\n  }\n  \n  .stores-modal-list-column {\n    flex: 2;\n    max-width: 35%;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .stores-modal-list-column .stores-map__list {\n    flex: 1;\n    max-height: none;\n  }\n  \n  .stores-map-wrapper {\n    height: 60% !important;\n  }\n  \n  .stores-modal-details-column {\n    height: 40%;\n  }\n} ',""]);const i=s},9153:(n,e,o)=>{o.d(e,{A:()=>F});var t=o(4848),r=o(6540),a=o(2114),s=o(9816),i=o(1765),l=o(7852),d=o(2620),c=o(6173),m=o(6717),p=o(4294),u=o(9701),h=o(2412),g=o(9276),x=o(9700),f=o(4307),_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCAzMiA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTYgMEM3LjE2NCAwIDAgNy4xNjQgMCAxNkMwIDI0IDE2IDQ4IDE2IDQ4QzE2IDQ4IDMyIDI0IDMyIDE2QzMyIDcuMTY0IDI0LjgzNiAwIDE2IDBaIiBmaWxsPSIjRDRBOTc3Ii8+PHBhdGggZD0iTTE2IDBDNy4xNjQgMCAwIDcuMTY0IDAgMTZDMCAyNCAxNiA0OCAxNiA0OEMxNiA0OCAzMiAyNCAzMiAxNkMzMiA3LjE2NCAyNC44MzYgMCAxNiAwWk0xNiAyMkMxMi42ODYgMjIgMTAgMTkuMzE0IDEwIDE2QzEwIDEyLjY4NiAxMi42ODYgMTAgMTYgMTBDMTkuMzE0IDEwIDIyIDEyLjY4NiAyMiAxNkMyMiAxOS4zMTQgMTkuMzE0IDIyIDE2IDIyWiIgZmlsbD0iIzRBNDMzQiIgZmlsbC1vcGFjaXR5PSIxIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iNiIgZmlsbD0iI0I4OUY3QSIvPjwvc3ZnPg==";const v=(0,r.memo)((function(n){var e=n.stores,o=n.selectedStoreId,r=n.onStoreSelect;return(0,t.jsx)("div",{className:"stores-map__list",children:e.map((function(n){return(0,t.jsxs)("button",{className:"stores-map__store-button ".concat(n.id===o?"stores-map__store-button--active":""),onClick:function(){return r(n.id)},children:[(0,t.jsx)("h3",{className:"stores-map__store-name",children:n.name}),(0,t.jsx)("p",{className:"stores-map__store-address",children:n.address})]},n.id)}))})}));o(5045);var b=o(5072),y=o.n(b),w=o(7825),k=o.n(w),I=o(7659),M=o.n(I),D=o(5056),A=o.n(D),N=o(540),j=o.n(N),z=o(1113),E=o.n(z),T=o(1843),S={};S.styleTagTransform=E(),S.setAttributes=A(),S.insert=M().bind(null,"head"),S.domAPI=k(),S.insertStyleElement=j();y()(T.A,S);T.A&&T.A.locals&&T.A.locals;var C=function(){return(0,t.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M12 8V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})};const O=(0,r.memo)((function(n){var e=n.stores,o=n.selectedStoreId,a=n.onStoreSelect,b=n.onMapReady,y=n.hideStoresList,w=void 0!==y&&y,k=function(n,e,o){var t=o||{},a=t.onMapReady,v=t.initialZoom,b=void 0===v?12:v,y=t.maxZoom,w=void 0===y?19:y,k=t.centerCoordinates,I=void 0===k?[104.280094,52.28743]:k,M=(0,r.useMemo)((function(){return I}),[null==I?void 0:I[0],null==I?void 0:I[1]]),D=(0,r.useMemo)((function(){return{initial:b,max:w}}),[b,w]),A=(0,r.useRef)(null),N=(0,r.useState)(null),j=N[0],z=N[1],E=(0,r.useState)(!1),T=E[0],S=E[1],C=(0,r.useState)(!0),O=C[0],L=C[1],Z=(0,r.useState)(""),R=Z[0],P=Z[1],Y=(0,r.useRef)(new h.A),Q=(0,r.useRef)(new u.A({source:Y.current,style:new g.Ay({image:new x.A({src:_,scale:.6,anchor:[.5,1],declutterMode:"obstacle"})}),zIndex:2})),B=(0,r.useCallback)((function(){if(A.current)try{var n=new s.A({target:A.current,layers:[new l.A({source:new d.A({attributions:[]})}),Q.current],view:new i.Ay({center:(0,c.Rb)(M),zoom:D.initial,maxZoom:D.max}),controls:(0,f.N)({zoom:!0,rotate:!1,attribution:!1})}),e=n.getLayers().getArray()[0].getSource(),o=0,t=0;e.on("tileloadstart",(function(){t++})),e.on("tileloaderror",(function(){o<4&&(P("Сервис карт временно недоступен"),S(!0),L(!1),null==a||a())})),e.on("tileloadend",(function(){++o>=4&&t>0&&(n.updateSize(),L(!1),null==a||a())})),z(n),n.updateSize();var r=setTimeout((function(){n.updateSize(),o>0?(L(!1),null==a||a()):(P("Сервис карт временно недоступен"),S(!0),L(!1),null==a||a())}),5e3);return{map:n,loadingTimeout:r}}catch(n){return P("Сервис карт временно недоступен"),S(!0),L(!1),null==a||a(),null}}),[M,D,a]);return(0,r.useEffect)((function(){var n=B();return function(){n&&(clearTimeout(n.loadingTimeout),n.map.setTarget(void 0))}}),[B]),(0,r.useEffect)((function(){if(j&&!T)try{Y.current.clear();var o=n.map((function(n){var o=new m.A({geometry:new p.A((0,c.Rb)(n.coordinates)),properties:n});return o.setStyle(new g.Ay({image:new x.A({src:n.id===e?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCAzMiA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTYgMEM3LjE2NCAwIDAgNy4xNjQgMCAxNkMwIDI0IDE2IDQ4IDE2IDQ4QzE2IDQ4IDMyIDI0IDMyIDE2QzMyIDcuMTY0IDI0LjgzNiAwIDE2IDBaIiBmaWxsPSIjQjg5RjdBIi8+PHBhdGggZD0iTTE2IDBDNy4xNjQgMCAwIDcuMTY0IDAgMTZDMCAyNCAxNiA0OCAxNiA0OEMxNiA0OCAzMiAyNCAzMiAxNkMzMiA3LjE2NCAyNC44MzYgMCAxNiAwWk0xNiAyMkMxMi42ODYgMjIgMTAgMTkuMzE0IDEwIDE2QzEwIDEyLjY4NiAxMi42ODYgMTAgMTYgMTBDMTkuMzE0IDEwIDIyIDEyLjY4NiAyMiAxNkMyMiAxOS4zMTQgMTkuMzE0IDIyIDE2IDIyWiIgZmlsbD0iIzRBNDMzQiIgZmlsbC1vcGFjaXR5PSIxIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iOCIgZmlsbD0iI0Q0QTk3NyIvPjwvc3ZnPg==":_,scale:n.id===e?.8:.6,anchor:[.5,1],opacity:1})})),o}));if(Y.current.addFeatures(o),e){var t=n.find((function(n){return n.id===e}));t&&j.getView().animate({center:(0,c.Rb)(t.coordinates),zoom:16,duration:800})}else o.length>0&&j.getView().animate({center:(0,c.Rb)(M),zoom:D.initial,duration:800})}catch(n){P("Не удалось отобразить магазины на карте"),S(!0),L(!1),null==a||a()}}),[n,e,j,T,M,D,a]),(0,r.useEffect)((function(){var n=function(){j&&!T&&j.updateSize()};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[j,T]),{mapRef:A,isLoading:O,isError:T,errorMessage:R,map:j}}(e,o,{onMapReady:b,initialZoom:12,maxZoom:19,centerCoordinates:[104.280094,52.28743]}),I=k.mapRef,M=k.isLoading,D=k.isError,A=k.errorMessage;return(0,t.jsxs)("div",{className:"stores-map ".concat(M?"":"stores-map--visible"),style:{height:"100%",width:"100%"},children:[(0,t.jsx)("div",{className:"stores-map__container",ref:I,style:{height:"100%",width:"100%"},children:D&&(0,t.jsxs)("div",{className:"stores-map__error",children:[(0,t.jsx)(C,{}),(0,t.jsx)("p",{children:A||"Сервис карт временно недоступен"})]})}),!w&&a&&(0,t.jsx)(v,{stores:e,selectedStoreId:o,onStoreSelect:a})]})}));var L=o(3285);const Z=(0,r.memo)((function(n){var e,o=n.store,a=(e=null==o?void 0:o.workSchedule,(0,r.useMemo)((function(){if(!e)return{isOpen:!1,statusText:"Информация о часах работы недоступна"};var n=new Date,o=n.getHours(),t=n.getMinutes(),r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a=r[n.getDay()],s=e[a];if(!s)return{isOpen:!1,statusText:"Информация о часах работы недоступна"};if(s.dayOff){for(var i=null,l="",d=1;d<=7;d++){(b=new Date).setDate(n.getDate()+d);var c=r[b.getDay()];if(e[c]&&!e[c].dayOff){i=c,l=(y={monday:"понедельника",tuesday:"вторника",wednesday:"среды",thursday:"четверга",friday:"пятницы",saturday:"субботы",sunday:"воскресенья"})[c];break}}return i&&e[i].open?{isOpen:!1,statusText:"Закрыто до ".concat(e[i].open," ").concat(l)}:{isOpen:!1,statusText:"Закрыто"}}if(!s.open||!s.close)return{isOpen:!1,statusText:"Информация о часах работы недоступна"};var m=60*o+t,p=s.open.split(":").map(Number),u=p[0],h=p[1],g=s.close.split(":").map(Number),x=g[0],f=g[1],_=60*u+h;if(m>=_&&m<60*x+f)return{isOpen:!0,statusText:"Открыто до ".concat(s.close)};if(m<_)return{isOpen:!1,statusText:"Откроется в ".concat(s.open)};i=null;var v=1;for(d=1;d<=7;d++){var b;if((b=new Date).setDate(n.getDate()+d),c=r[b.getDay()],e[c]&&!e[c].dayOff){i=c,v=d;break}}if(i&&e[i].open){var y=["завтра","послезавтра"],w=v<=2?y[v-1]:"через ".concat(v," дня");return{isOpen:!1,statusText:"Закрыто, откроется ".concat(w," в ").concat(e[i].open)}}return{isOpen:!1,statusText:"Закрыто"}}),[e])),s=a.isOpen,i=a.statusText;return o?(0,t.jsx)("div",{className:"store-details",children:(0,t.jsxs)("div",{className:"store-details__layout",children:[(0,t.jsx)("div",{className:"store-details__photo-column",children:(0,t.jsx)(L.A,{src:o.photo||"",alt:"Магазин ".concat(o.name),fallbackSrc:"/images/store-placeholder.jpg",className:"store-details__photo",containerClassName:"store-details__photo-wrapper",objectFit:"cover"},"store-photo-".concat(o.id))}),(0,t.jsxs)("div",{className:"store-details__info-column",children:[(0,t.jsx)("h3",{className:"store-details__name",children:o.name}),(0,t.jsxs)("div",{className:"store-details__address",children:[(0,t.jsx)("span",{className:"store-details__icon",children:"📍"}),(0,t.jsx)("span",{children:o.address})]}),(0,t.jsxs)("div",{className:"store-details__phone",children:[(0,t.jsx)("span",{className:"store-details__icon",children:"📞"}),(0,t.jsx)("a",{href:"tel:".concat(o.phone),className:"store-details__link",children:o.phone})]}),(0,t.jsxs)("div",{className:"store-details__status ".concat(s?"store-details__status--open":"store-details__status--closed"),children:[(0,t.jsx)("span",{className:"store-details__icon",children:s?"✓":"✕"}),(0,t.jsx)("span",{children:i})]})]})]})}):(0,t.jsx)("div",{className:"store-details store-details--empty",children:(0,t.jsx)("p",{className:"store-details__message",children:"Выберите магазин для просмотра деталей"})})}));var R=o(6905),P=o(9170),Y=function(){return Y=Object.assign||function(n){for(var e,o=1,t=arguments.length;o<t;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Y.apply(this,arguments)},Q={selectedStoreId:void 0,isMapLoading:!0,showMap:!1};function B(n,e){switch(e.type){case"OPEN_MODAL":return Y(Y({},n),{isMapLoading:!0,showMap:!1});case"INIT_MAP":return Y(Y({},n),{showMap:!0});case"MAP_LOADED":return Y(Y({},n),{isMapLoading:!1});case"SELECT_STORE":return Y(Y({},n),{selectedStoreId:e.payload});case"RESET":return Q;default:return n}}const F=function(n){var e=n.isOpen,o=n.onClose,s=(0,r.useReducer)(B,Q),i=s[0],l=s[1],d=i.selectedStoreId,c=i.isMapLoading,m=i.showMap,p=(0,r.useMemo)((function(){if(d)return P.ZZ.find((function(n){return n.id===d}))}),[d]);(0,r.useEffect)((function(){if(e){l({type:"OPEN_MODAL"});var n=setTimeout((function(){l({type:"INIT_MAP"})}),300);return function(){return clearTimeout(n)}}l({type:"RESET"})}),[e]);var u=(0,r.useCallback)((function(){l({type:"MAP_LOADED"})}),[]),h=(0,r.useCallback)((function(n){l({type:"SELECT_STORE",payload:n})}),[]);return(0,t.jsx)(a.A,{isOpen:e,onClose:o,title:"Наши магазины",isLoading:!1,children:(0,t.jsx)("div",{className:"stores-modal-content",children:(0,t.jsxs)("div",{className:"stores-modal-layout",children:[(0,t.jsxs)("div",{className:"stores-modal-map-column",children:[(0,t.jsxs)("div",{className:"stores-map-wrapper",style:{height:"100%",width:"100%",position:"relative"},children:[c&&(0,t.jsx)("div",{className:"stores-map__skeleton-container",children:(0,t.jsx)(R.A,{height:"100%",width:"100%"})}),m&&(0,t.jsx)("div",{style:{opacity:c?0:1,transition:"opacity 0.3s ease-in-out",height:"100%",width:"100%",position:"absolute",top:0,left:0},children:(0,t.jsx)(O,{stores:P.ZZ,selectedStoreId:d,onStoreSelect:h,onMapReady:u,hideStoresList:!0})})]}),(0,t.jsx)("div",{className:"stores-modal-details-column",children:(0,t.jsx)(Z,{store:p})})]}),(0,t.jsxs)("div",{className:"stores-modal-list-column",children:[(0,t.jsx)("h3",{className:"stores-section-title",children:"Выберите магазин:"}),(0,t.jsx)(v,{stores:P.ZZ,selectedStoreId:d,onStoreSelect:h})]})]})})})}}}]);
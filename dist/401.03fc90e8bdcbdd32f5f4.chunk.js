"use strict";(self.webpackChunkbazaar_front=self.webpackChunkbazaar_front||[]).push([[401],{3057:(e,i,t)=>{t.d(i,{A:()=>l});var o=t(4848),r=t(6540),c=t(4976),n=t(2896),a=t(7119),s=t(4867);const l=function(e){var i=e.id,t=e.title,l=e.price,u=e.image,d=e.isHot,p=(0,n.wA)(),g=(0,r.useState)(!1),m=g[0],f=g[1],b=(0,r.useRef)(null),h=(0,r.useState)({x:0,y:0}),x=h[0],j=h[1];return(0,o.jsxs)(c.N_,{to:"/product/".concat(i),className:"product-card",children:[d&&(0,o.jsx)("div",{className:"product-card__badge",children:"Горячее предложение"}),(0,o.jsx)("div",{className:"product-card__image",children:(0,o.jsx)("img",{src:u,alt:t})}),(0,o.jsxs)("div",{className:"product-card__content",children:[(0,o.jsx)("h3",{className:"product-card__title",children:t}),(0,o.jsxs)("div",{className:"product-card__price",children:[l," ₽"]}),(0,o.jsx)("button",{ref:b,className:"button button--primary product-card__button",onClick:function(e){e.preventDefault(),e.stopPropagation(),console.log("Add to cart clicked for product:",i),j({x:e.clientX,y:e.clientY}),b.current&&(b.current.classList.add("clicked"),setTimeout((function(){var e;null===(e=b.current)||void 0===e||e.classList.remove("clicked")}),200)),f(!0),setTimeout((function(){p((0,a.bE)({id:i,name:t,price:l,quantity:1,image:u}))}),400)},"data-product-id":i,"aria-label":"Добавить ".concat(t," в корзину"),id:"add-to-cart-".concat(i),children:"В корзину"})]}),m&&(0,o.jsx)(s.A,{productId:i,isVisible:m,onAnimationEnd:function(){return f(!1)},clickPosition:x})]})}},3785:(e,i,t)=>{t.d(i,{Z:()=>o});var o=[{id:1,title:"Нежное облако",description:"Воздушный букет из белых хризантем",price:2500,image:"/images/bouquets/cloud.jpg",color:"white"},{id:2,title:"Весенний рассвет",description:"Яркий букет из тюльпанов разных оттенков",price:2800,image:"/images/bouquets/sunrise.jpg",color:"pink"},{id:3,title:"Солнечный день",description:"Композиция из желтых гербер и хризантем",price:2700,image:"/images/bouquets/sunny.jpg",color:"yellow"},{id:4,title:"Лавандовые мечты",description:"Букет из лавандовых эустом",price:2900,image:"/images/bouquets/lavender.jpg",color:"purple"},{id:5,title:"Морской бриз",description:"Букет из синих ирисов и белых роз",price:2600,image:"/images/bouquets/breeze.jpg",color:"blue"},{id:6,title:"Розовый зефир",description:"Нежный букет из розовых гвоздик",price:2400,image:"/images/bouquets/pink.jpg",color:"pink"},{id:7,title:"Огненный закат",description:"Яркий букет из оранжевых лилий",price:2900,image:"/images/bouquets/sunset.jpg",color:"red"},{id:8,title:"Белая элегантность",description:"Изысканный букет из белых калл",price:2800,image:"/images/bouquets/elegance.jpg",color:"white"},{id:9,title:"Фиолетовое чудо",description:"Букет из фиолетовых альстромерий",price:2700,image:"/images/bouquets/purple.jpg",color:"purple"},{id:10,title:"Весенняя свежесть",description:"Букет из белых и желтых нарциссов",price:2500,image:"/images/bouquets/fresh.jpg",color:"yellow"},{id:11,title:"Королевский шарм",description:"Роскошный букет из красных роз",price:4500,image:"/images/bouquets/royal.jpg",color:"red"},{id:12,title:"Розовая нежность",description:"Букет из розовых пионов и роз",price:4800,image:"/images/bouquets/tenderness.jpg",color:"pink"},{id:13,title:"Белая роскошь",description:"Элегантный букет из белых орхидей",price:4700,image:"/images/bouquets/luxury.jpg",color:"white"},{id:14,title:"Летний сад",description:"Яркий микс из садовых цветов",price:4200,image:"/images/bouquets/garden.jpg",color:"yellow"},{id:15,title:"Сиреневый туман",description:"Букет из сиреневых роз и эустом",price:4600,image:"/images/bouquets/purple-mist.jpg",color:"purple"},{id:16,title:"Голубая лагуна",description:"Букет из голубых гортензий",price:4900,image:"/images/bouquets/lagoon.jpg",color:"blue"},{id:17,title:"Огненная страсть",description:"Букет из красных и оранжевых роз",price:4700,image:"/images/bouquets/passion.jpg",color:"red"},{id:18,title:"Нежный шелк",description:"Букет из розовых пионовидных роз",price:4500,image:"/images/bouquets/silk.jpg",color:"pink"},{id:19,title:"Белый бриллиант",description:"Букет из белых роз и фрезий",price:4800,image:"/images/bouquets/diamond.jpg",color:"white"},{id:20,title:"Фиолетовый шик",description:"Букет из фиолетовых роз и лизиантусов",price:4600,image:"/images/bouquets/violet.jpg",color:"purple"},{id:21,title:"Премиум роскошь",description:"Роскошный букет из 101 красной розы",price:9500,image:"/images/bouquets/premium.jpg",color:"red"},{id:22,title:"Розовая мечта",description:"Пышный букет из розовых пионов",price:8500,image:"/images/bouquets/dream.jpg",color:"pink"},{id:23,title:"Белоснежная роскошь",description:"VIP букет из белых орхидей и роз",price:9e3,image:"/images/bouquets/snow.jpg",color:"white"},{id:24,title:"Солнечный люкс",description:"Премиум букет из желтых роз и орхидей",price:8800,image:"/images/bouquets/sunny-lux.jpg",color:"yellow"},{id:25,title:"Фиолетовый рай",description:"Роскошный букет из фиолетовых орхидей",price:9200,image:"/images/bouquets/purple-paradise.jpg",color:"purple"},{id:26,title:"Голубая мечта",description:"Букет из голубых гортензий и орхидей",price:9500,image:"/images/bouquets/blue-dream.jpg",color:"blue"},{id:27,title:"Красный бархат",description:"Премиальный букет из красных пионовидных роз",price:9800,image:"/images/bouquets/red-velvet.jpg",color:"red"},{id:28,title:"Розовый сапфир",description:"VIP букет из розовых роз и орхидей",price:9300,image:"/images/bouquets/pink-sapphire.jpg",color:"pink"},{id:29,title:"Белый бриллиант люкс",description:"Роскошный букет из белых пионов и роз",price:9600,image:"/images/bouquets/white-diamond.jpg",color:"white"},{id:30,title:"Фиолетовая роскошь",description:"Премиум букет из фиолетовых роз и калл",price:9400,image:"/images/bouquets/purple-luxury.jpg",color:"purple"}]},4867:(e,i,t)=>{t.d(i,{A:()=>q});var o=t(4848),r=t(6540),c=t(961),n=t(5072),a=t.n(n),s=t(7825),l=t.n(s),u=t(7659),d=t.n(u),p=t(5056),g=t.n(p),m=t(540),f=t.n(m),b=t(1113),h=t.n(b),x=t(814),j={};j.styleTagTransform=h(),j.setAttributes=g(),j.insert=d().bind(null,"head"),j.domAPI=l(),j.insertStyleElement=f();a()(x.A,j);x.A&&x.A.locals&&x.A.locals;var v=function(){return v=Object.assign||function(e){for(var i,t=1,o=arguments.length;t<o;t++)for(var r in i=arguments[t])Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);return e},v.apply(this,arguments)},y=function(e,i,t){if(t||2===arguments.length)for(var o,r=0,c=i.length;r<c;r++)!o&&r in i||(o||(o=Array.prototype.slice.call(i,0,r)),o[r]=i[r]);return e.concat(o||Array.prototype.slice.call(i))};const q=function(e){var i=e.productId,t=e.isVisible,n=e.onAnimationEnd,a=e.clickPosition,s=(0,r.useState)({}),l=s[0],u=s[1],d=(0,r.useState)(""),p=d[0],g=d[1],m=(0,r.useState)([]),f=m[0],b=m[1],h=(0,r.useRef)(null),x=(0,r.useRef)(!1),j=(0,r.useRef)(null),q=(0,r.useRef)(0),w=(0,r.useRef)({x:0,y:0});return(0,r.useEffect)((function(){if(!t)return u({}),b([]),x.current=!1,void(q.current=0);console.log("Animation triggered with clickPosition:",a);var e=document.querySelector(".cart-button");if(!e)return console.error("Не удалось найти кнопку корзины"),g("Ошибка: кнопка корзины не найдена"),void n();var i=e.getBoundingClientRect(),o=i.left+i.width/2,r=i.top+i.height/2;console.log("Cart button found:",{cartX:o,cartY:r});var c=a.x,s=a.y;if(w.current={x:c,y:s},u({position:"fixed",top:"".concat(s,"px"),left:"".concat(c,"px"),width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"var(--color-badge)",opacity:1,zIndex:999999999,boxShadow:"0 0 10px rgba(var(--color-accent-rgb), 0.7)"}),!j.current){var l=document.createElement("div");l.id="animation-portal",document.body.appendChild(l),j.current=l}var d=setTimeout((function(){if(t){x.current=!0;for(var i=350,a=[],l=0;l<30;l++){var p=l/29,g=(Math.sin(Math.PI*p),c+(o-c)*p),m=s+(r-s)*p-30*Math.sin(Math.PI*p);a.push({x:g,y:m})}u((function(e){return v(v({},e),{top:"".concat(r,"px"),left:"".concat(o,"px"),transition:"all ".concat(i,"ms cubic-bezier(0.25, 0.1, 0.25, 1.0)"),transform:"scale(0.1)",opacity:.5})}));var f=function(e){var o=58.333333333333336*e;setTimeout((function(){if(t){var r=o/i*.8,c=Math.floor(r*a.length),n=a[Math.min(c,a.length-1)];b((function(i){var t={id:Date.now()+Math.random(),style:{position:"fixed",top:"".concat(n.y,"px"),left:"".concat(n.x,"px"),width:"16px",height:"16px",opacity:0,transform:"scale(0)",animation:"dot-appear 300ms forwards",zIndex:999999990-e}};return y(y([],i,!0),[t],!1).slice(-5)}))}}),o)};for(l=1;l<=5;l++)f(l);console.log("Animation started towards cart:",{cartX:o,cartY:r});var h=setTimeout((function(){e.classList.add("cart-flash"),setTimeout((function(){e.classList.remove("cart-flash")}),300),console.log("Cart flash triggered")}),i),j=setTimeout((function(){n(),console.log("Animation completed")}),650);return function(){clearTimeout(d),clearTimeout(h),clearTimeout(j)}}}),10);return function(){clearTimeout(d)}}),[t,i,n,a]),(0,r.useEffect)((function(){return function(){if(j.current&&document.body.contains(j.current))try{document.body.removeChild(j.current),j.current=null}catch(e){console.error("Ошибка при удалении портала:",e)}}}),[]),c.createPortal((0,o.jsx)(o.Fragment,{children:t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{ref:h,className:"animation-circle",style:l}),f.map((function(e){return(0,o.jsx)("div",{className:"animation-trail-dot",style:e.style},e.id)})),p&&(0,o.jsx)("div",{style:{position:"fixed",top:"20px",left:"20px",backgroundColor:"rgba(0,0,0,0.8)",color:"white",padding:"10px",zIndex:999999,maxWidth:"300px"},children:p})]})}),document.body)}}}]);
"use strict";(self.webpackChunkbazaar_front=self.webpackChunkbazaar_front||[]).push([[401],{3057:(e,i,t)=>{t.d(i,{A:()=>u});var o=t(4848),r=t(6540),c=t(4976),a=t(2896),n=t(7119),s=t(4867),l=t(3285);const u=function(e){var i=e.id,t=e.title,u=e.price,p=e.image,d=e.isHot,g=(0,a.wA)(),m=(0,r.useState)(!1),f=m[0],b=m[1],h=(0,r.useRef)(null),j=(0,r.useState)({x:0,y:0}),x=j[0],v=j[1];return(0,o.jsxs)(c.N_,{to:"/products/".concat(i),className:"product-card",children:[d&&(0,o.jsx)("div",{className:"product-card__badge",children:"Горячее предложение"}),(0,o.jsx)("div",{className:"product-card__image",children:(0,o.jsx)(l.A,{src:p,alt:t,fallbackSrc:"/images/product-placeholder.jpg",className:"product-card__image-content",containerClassName:"product-card__image-wrapper",objectFit:"cover",aspectRatio:1})}),(0,o.jsxs)("div",{className:"product-card__content",children:[(0,o.jsx)("h3",{className:"product-card__title",children:t}),(0,o.jsxs)("div",{className:"product-card__price",children:[u," ₽"]}),(0,o.jsx)("button",{ref:h,className:"button button--primary product-card__button",onClick:function(e){e.preventDefault(),e.stopPropagation(),console.log("Add to cart clicked for product:",i),v({x:e.clientX,y:e.clientY}),h.current&&(h.current.classList.add("clicked"),setTimeout((function(){var e;null===(e=h.current)||void 0===e||e.classList.remove("clicked")}),200)),b(!0),setTimeout((function(){g((0,n.bE)({id:i,name:t,price:u,quantity:1,image:p}))}),400)},"data-product-id":i,"aria-label":"Добавить ".concat(t," в корзину"),id:"add-to-cart-".concat(i),children:"В корзину"})]}),f&&(0,o.jsx)(s.A,{productId:i,isVisible:f,onAnimationEnd:function(){return b(!1)},clickPosition:x})]})}},3785:(e,i,t)=>{t.d(i,{Z:()=>o});var o=[{id:1,title:"Нежное облако",description:"Воздушный букет из белых хризантем",price:2500,image:"/images/bouquets/cloud.jpg",color:"white"},{id:2,title:"Весенний рассвет",description:"Яркий букет из тюльпанов разных оттенков",price:2800,image:"/images/bouquets/sunrise.jpg",color:"pink"},{id:3,title:"Солнечный день",description:"Композиция из желтых гербер и хризантем",price:2700,image:"/images/bouquets/sunny.jpg",color:"yellow"},{id:4,title:"Лавандовые мечты",description:"Букет из лавандовых эустом",price:2900,image:"/images/bouquets/lavender.jpg",color:"purple"},{id:5,title:"Морской бриз",description:"Букет из синих ирисов и белых роз",price:2600,image:"/images/bouquets/breeze.jpg",color:"blue"},{id:6,title:"Розовый зефир",description:"Нежный букет из розовых гвоздик",price:2400,image:"/images/bouquets/pink.jpg",color:"pink"},{id:7,title:"Огненный закат",description:"Яркий букет из оранжевых лилий",price:2900,image:"/images/bouquets/sunset.jpg",color:"red"},{id:8,title:"Белая элегантность",description:"Изысканный букет из белых калл",price:2800,image:"/images/bouquets/elegance.jpg",color:"white"},{id:9,title:"Фиолетовое чудо",description:"Букет из фиолетовых альстромерий",price:2700,image:"/images/bouquets/purple.jpg",color:"purple"},{id:10,title:"Весенняя свежесть",description:"Букет из белых и желтых нарциссов",price:2500,image:"/images/bouquets/fresh.jpg",color:"yellow"},{id:11,title:"Королевский шарм",description:"Роскошный букет из красных роз",price:4500,image:"/images/bouquets/royal.jpg",color:"red"},{id:12,title:"Розовая нежность",description:"Букет из розовых пионов и роз",price:4800,image:"/images/bouquets/tenderness.jpg",color:"pink"},{id:13,title:"Белая роскошь",description:"Элегантный букет из белых орхидей",price:4700,image:"/images/bouquets/luxury.jpg",color:"white"},{id:14,title:"Летний сад",description:"Яркий микс из садовых цветов",price:4200,image:"/images/bouquets/garden.jpg",color:"yellow"},{id:15,title:"Сиреневый туман",description:"Букет из сиреневых роз и эустом",price:4600,image:"/images/bouquets/purple-mist.jpg",color:"purple"},{id:16,title:"Голубая лагуна",description:"Букет из голубых гортензий",price:4900,image:"/images/bouquets/lagoon.jpg",color:"blue"},{id:17,title:"Огненная страсть",description:"Букет из красных и оранжевых роз",price:4700,image:"/images/bouquets/passion.jpg",color:"red"},{id:18,title:"Нежный шелк",description:"Букет из розовых пионовидных роз",price:4500,image:"/images/bouquets/silk.jpg",color:"pink"},{id:19,title:"Белый бриллиант",description:"Букет из белых роз и фрезий",price:4800,image:"/images/bouquets/diamond.jpg",color:"white"},{id:20,title:"Фиолетовый шик",description:"Букет из фиолетовых роз и лизиантусов",price:4600,image:"/images/bouquets/violet.jpg",color:"purple"},{id:21,title:"Премиум роскошь",description:"Роскошный букет из 101 красной розы",price:9500,image:"/images/bouquets/premium.jpg",color:"red"},{id:22,title:"Розовая мечта",description:"Пышный букет из розовых пионов",price:8500,image:"/images/bouquets/dream.jpg",color:"pink"},{id:23,title:"Белоснежная роскошь",description:"VIP букет из белых орхидей и роз",price:9e3,image:"/images/bouquets/snow.jpg",color:"white"},{id:24,title:"Солнечный люкс",description:"Премиум букет из желтых роз и орхидей",price:8800,image:"/images/bouquets/sunny-lux.jpg",color:"yellow"},{id:25,title:"Фиолетовый рай",description:"Роскошный букет из фиолетовых орхидей",price:9200,image:"/images/bouquets/purple-paradise.jpg",color:"purple"},{id:26,title:"Голубая мечта",description:"Букет из голубых гортензий и орхидей",price:9500,image:"/images/bouquets/blue-dream.jpg",color:"blue"},{id:27,title:"Красный бархат",description:"Премиальный букет из красных пионовидных роз",price:9800,image:"/images/bouquets/red-velvet.jpg",color:"red"},{id:28,title:"Розовый сапфир",description:"VIP букет из розовых роз и орхидей",price:9300,image:"/images/bouquets/pink-sapphire.jpg",color:"pink"},{id:29,title:"Белый бриллиант люкс",description:"Роскошный букет из белых пионов и роз",price:9600,image:"/images/bouquets/white-diamond.jpg",color:"white"},{id:30,title:"Фиолетовая роскошь",description:"Премиум букет из фиолетовых роз и калл",price:9400,image:"/images/bouquets/purple-luxury.jpg",color:"purple"}]},4867:(e,i,t)=>{t.d(i,{A:()=>q});var o=t(4848),r=t(6540),c=t(961),a=t(5072),n=t.n(a),s=t(7825),l=t.n(s),u=t(7659),p=t.n(u),d=t(5056),g=t.n(d),m=t(540),f=t.n(m),b=t(1113),h=t.n(b),j=t(814),x={};x.styleTagTransform=h(),x.setAttributes=g(),x.insert=p().bind(null,"head"),x.domAPI=l(),x.insertStyleElement=f();n()(j.A,x);j.A&&j.A.locals&&j.A.locals;var v=function(){return v=Object.assign||function(e){for(var i,t=1,o=arguments.length;t<o;t++)for(var r in i=arguments[t])Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);return e},v.apply(this,arguments)},y=function(e,i,t){if(t||2===arguments.length)for(var o,r=0,c=i.length;r<c;r++)!o&&r in i||(o||(o=Array.prototype.slice.call(i,0,r)),o[r]=i[r]);return e.concat(o||Array.prototype.slice.call(i))};const q=function(e){var i=e.productId,t=e.isVisible,a=e.onAnimationEnd,n=e.clickPosition,s=(0,r.useState)({}),l=s[0],u=s[1],p=(0,r.useState)(""),d=p[0],g=p[1],m=(0,r.useState)([]),f=m[0],b=m[1],h=(0,r.useRef)(null),j=(0,r.useRef)(!1),x=(0,r.useRef)(null),q=(0,r.useRef)(0),w=(0,r.useRef)({x:0,y:0});return(0,r.useEffect)((function(){if(!t)return u({}),b([]),j.current=!1,void(q.current=0);console.log("Animation triggered with clickPosition:",n);var e=document.querySelector(".cart-button");if(!e)return console.error("Не удалось найти кнопку корзины"),g("Ошибка: кнопка корзины не найдена"),void a();var i=e.getBoundingClientRect(),o=i.left+i.width/2,r=i.top+i.height/2;console.log("Cart button found:",{cartX:o,cartY:r});var c=n.x,s=n.y;if(w.current={x:c,y:s},u({position:"fixed",top:"".concat(s,"px"),left:"".concat(c,"px"),width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"var(--color-badge)",opacity:1,zIndex:999999999,boxShadow:"0 0 10px rgba(var(--color-accent-rgb), 0.7)"}),!x.current){var l=document.createElement("div");l.id="animation-portal",document.body.appendChild(l),x.current=l}var p=setTimeout((function(){if(t){j.current=!0;for(var i=350,n=[],l=0;l<30;l++){var d=l/29,g=(Math.sin(Math.PI*d),c+(o-c)*d),m=s+(r-s)*d-30*Math.sin(Math.PI*d);n.push({x:g,y:m})}u((function(e){return v(v({},e),{top:"".concat(r,"px"),left:"".concat(o,"px"),transition:"all ".concat(i,"ms cubic-bezier(0.25, 0.1, 0.25, 1.0)"),transform:"scale(0.1)",opacity:.5})}));var f=function(e){var o=58.333333333333336*e;setTimeout((function(){if(t){var r=o/i*.8,c=Math.floor(r*n.length),a=n[Math.min(c,n.length-1)];b((function(i){var t={id:Date.now()+Math.random(),style:{position:"fixed",top:"".concat(a.y,"px"),left:"".concat(a.x,"px"),width:"16px",height:"16px",opacity:0,transform:"scale(0)",animation:"dot-appear 300ms forwards",zIndex:999999990-e}};return y(y([],i,!0),[t],!1).slice(-5)}))}}),o)};for(l=1;l<=5;l++)f(l);console.log("Animation started towards cart:",{cartX:o,cartY:r});var h=setTimeout((function(){e.classList.add("cart-flash"),setTimeout((function(){e.classList.remove("cart-flash")}),300),console.log("Cart flash triggered")}),i),x=setTimeout((function(){a(),console.log("Animation completed")}),650);return function(){clearTimeout(p),clearTimeout(h),clearTimeout(x)}}}),10);return function(){clearTimeout(p)}}),[t,i,a,n]),(0,r.useEffect)((function(){return function(){if(x.current&&document.body.contains(x.current))try{document.body.removeChild(x.current),x.current=null}catch(e){console.error("Ошибка при удалении портала:",e)}}}),[]),c.createPortal((0,o.jsx)(o.Fragment,{children:t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{ref:h,className:"animation-circle",style:l}),f.map((function(e){return(0,o.jsx)("div",{className:"animation-trail-dot",style:e.style},e.id)})),d&&(0,o.jsx)("div",{style:{position:"fixed",top:"20px",left:"20px",backgroundColor:"rgba(0,0,0,0.8)",color:"white",padding:"10px",zIndex:999999,maxWidth:"300px"},children:d})]})}),document.body)}}}]);